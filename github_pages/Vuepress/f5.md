# 主题

提示

主题组件受到相同的 [浏览器的 API 访问限制](https://vuepress.vuejs.org/zh/guide/using-vue.html#浏览器的API访问限制).

本栏的主要内容如下：

- [使用主题](https://vuepress.vuejs.org/zh/theme/using-a-theme.html)
- [开发主题](https://vuepress.vuejs.org/zh/theme/writing-a-theme.html)
- [主题的配置](https://vuepress.vuejs.org/zh/theme/option-api.html)
- [主题的继承](https://vuepress.vuejs.org/zh/theme/inheritance.html)
- [默认主题配置](https://vuepress.vuejs.org/zh/theme/default-theme-config.html)

# 使用主题

使用一个主题和使用一个插件的方式几乎一致。

## [#](https://vuepress.vuejs.org/zh/theme/using-a-theme.html#使用来自依赖的主题)使用来自依赖的主题

一个主题可以在以 `vuepress-theme-xxx` 的形式发布到 npm，你可以这样使用它：

```js
// .vuepress/config.js
module.exports = {
  theme: 'vuepress-theme-xx'
}
```

## [#](https://vuepress.vuejs.org/zh/theme/using-a-theme.html#主题的缩写)主题的缩写

如果你的主题名以 `vuepress-theme-` 开头，你可以使用缩写来省略这个前缀：

```js
// .vuepress/config.js
module.exports = {
  theme: 'xxx'
}
```

和下面等价：

```js
// .vuepress/config.js
module.exports = {
  theme: 'vuepress-theme-xxx'
}
```

这也适用于 [Scoped Packages (opens new window)](https://docs.npmjs.com/misc/scope):

```js
// .vuepress/config.js
module.exports = {
  theme: '@org/vuepress-theme-xxx', // 或者一个官方主题: '@vuepress/theme-xxx'
}
```

缩写:

```js
// .vuepress/config.js
module.exports = {
  theme: '@org/xxx', // 或者一个官方主题: '@vuepress/xxx'
}
```

注意

以 `@vuepress/theme-` 开头的主题是官方维护的主题。



# 开发主题

想要书写一个主题，首先在你文档根目录创建一个 `.vuepress/theme` 目录，接着创建一个 `Layout.vue` 文件：

```
.
└─ .vuepress
 └─ theme
     └─ Layout.vue
```

到这里，就像开发一个普通的 Vue 应用一样。如何组织你的主题，这完全取决于你。

## [#](https://vuepress.vuejs.org/zh/theme/writing-a-theme.html#获取渲染内容)获取渲染内容

当前的 `.md` 文件渲染的内容，可以作为一个独特的全局组件 `<Content/>` 来使用，你可能想要它显示在页面中的某个地方。一个最简单的主题，可以是一个唯一的 `Layout.vue` 组件，并包含以下内容：

```html
<template>
  <div class="theme-container">
    <Content/>
  </div>
</template>
```

**更多请阅读:**

- [Markdown 插槽](https://vuepress.vuejs.org/zh/guide/markdown-slot.html)

## [#](https://vuepress.vuejs.org/zh/theme/writing-a-theme.html#内容摘抄)内容摘抄

如果一个 markdown 文件中有一个 `<!-- more -->` 注释，则该注释之前的内容会被抓取并暴露在 `$page.excerpt` 属性中。如果你在开发一个博客主题，你可以用这个属性来渲染一个带摘抄的文章列表。

## [#](https://vuepress.vuejs.org/zh/theme/writing-a-theme.html#目录结构)目录结构

随着需求的变化，只有一个布局组件 `Layout.vue` 可能还不够，你可能想要定义更多的布局组件用于不同的页面，你可能还想要自定义一个[调色板](https://vuepress.vuejs.org/zh/config/#palette-styl)，甚至应用一些插件。

那么是时候重新组织你的主题了！一个约定的主题的目录结构如下：

```
theme
├── global-components
│   └── xxx.vue
├── components
│   └── xxx.vue
├── layouts
│   ├── Layout.vue (必要的)
│   └── 404.vue
├── styles
│   ├── index.styl
│   └── palette.styl
├── templates
│   ├── dev.html
│   └── ssr.html
├── index.js
├── enhanceApp.js
└── package.json
```

- `theme/global-components`: 该目录下的组件都会被自动注册为全局组件。想了解更多，请参考 [@vuepress/plugin-register-components (opens new window)](https://github.com/vuejs/vuepress/tree/master/packages/@vuepress/plugin-register-components)。
- `theme/components`: Vue 组件。
- `theme/layouts`: 布局组件，其中 `Layout.vue` 是必需的。
- `theme/styles`: 全局的样式和调色板。
- `theme/templates`: 修改默认的模板文件。
- `theme/index.js`: 主题文件的入口文件。
- `theme/enhanceApp.js`: 主题水平的客户端增强文件。

注意

当你将你的主题以一个 npm 包的形式发布时，如果你没有任何主题配置，即没有 `theme/index.js`，那么你需要将 `package.json` 中的 `"main"` 字段设置为 `layouts/Layout.vue`，只有这样 VuePress 才能正确地解析主题。

```json
{
  ...
  "main": "layouts/Layout.vue",
  ...
}
```

## [#](https://vuepress.vuejs.org/zh/theme/writing-a-theme.html#布局组件)布局组件

假设你的主题 `layouts` 目录如下：

```
theme
└── layouts
   ├── Layout.vue
   ├── AnotherLayout.vue
   └── 404.vue
```

然后，所有的页面将会默认使用 `Layout.vue` 作为布局组件，对于那些匹配不到的路由将会使用 `404.vue`。

如果你想要在某一个页面中使用 `AnotherLayout.vue` 作为布局组件，那么你只需要更新这个页面的 `frontmatter`：

```markdown
---
layout: AnotherLayout
---
```

提示

每个 layout 组件都可能会渲染出截然不同的页面，如果你想设置一些全局的 UI（如全局的 `<header>`），可以考虑使用 [globalLayout](https://vuepress.vuejs.org/zh/theme/option-api.html#globallayout)。

## [#](https://vuepress.vuejs.org/zh/theme/writing-a-theme.html#使用插件)使用插件

你可以通过主题的配置文件 `themePath/index.js` 来给主题应用一些插件：

```js
// .vuepress/theme/index.js
module.exports = {
  plugins: [
    '@vuepress/pwa',
    {
      serviceWorker: true,
      updatePopup: true
    }
  ]
}
```

## [#](https://vuepress.vuejs.org/zh/theme/writing-a-theme.html#网站和页面的元数据)网站和页面的元数据

`Layout` 组件将会对每一个文档目录下的 `.md` 执行一次，同时，整个网站以及特定页面的元数据将分别暴露为 `this.$site` 和 `this.$page` 属性，它们将会被注入到每一个当前应用的组件中。

这是你现在看到的这个网站的 `$site` 的值：

```json
{
  "title": "VuePress",
  "description": "Vue 驱动的静态网站生成器",
  "base": "/",
  "pages": [
    {
      "lastUpdated": 1524027677000,
      "path": "/",
      "title": "VuePress",
      "frontmatter": {}
    },
    ...
  ]
}
```

`title`, `description` 和 `base` 会从 `.vuepress/config.js` 中对应的的字段复制过来，而 `pages` 是一个包含了每个页面元数据对象的数据，包括它的路径、页面标题（明确地通过 [YAML front matter](https://vuepress.vuejs.org/zh/guide/markdown.html#front-matter) 指定，或者通过该页面的第一个标题取到），以及所有源文件中的 `YAML front matter` 的数据。

下面的这个对象是你正在看的这个页面的 `$page` 的值：

```json
{
  "lastUpdated": 1524847549000,
  "path": "/custom-themes.html",
  "title": "自定义主题",
  "headers": [/* ... */],
  "frontmatter": {}
}
```

如果用户在 `.vuepress/config.js` 配置了 `themeConfig`，你将可以通过 `$site.themeConfig` 访问到它。如此一来，你可以通过它来对用户开放一些自定义主题的配置 —— 比如指定目录或者页面的顺序，你也可以结合 `$site.pages` 来动态地构建导航链接。

最后，别忘了，作为 Vue Router API 的一部分，`this.$route` 和 `this.$router` 同样可以使用。

提示

`lastUpdated` 是这个文件最后一次 git 提交的 UNIX 时间戳，更多细节请参考：[最后更新时间](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#最后更新时间)。

**参考:**

- [全局计算属性](https://vuepress.vuejs.org/zh/guide/global-computed.html).

## [#](https://vuepress.vuejs.org/zh/theme/writing-a-theme.html#应用配置)应用配置

自定义主题也可以通过主题根目录下的 `enhanceApp.js` 文件来对 VuePress 应用进行拓展配置。这个文件应当 `export default` 一个钩子函数，并接受一个包含了一些应用级别属性的对象作为参数。你可以使用这个钩子来安装一些附加的 Vue 插件、注册全局组件，或者增加额外的路由钩子等：

```js
export default ({
  Vue, // VuePress 正在使用的 Vue 构造函数
  options, // 附加到根实例的一些选项
  router, // 当前应用的路由实例
  siteData // 站点元数据
}) => {
  // ...做一些其他的应用级别的优化
}
```



# 主题的配置

和插件几乎一样，主题的配置文件 `themeEntry` 应该导出一个普通的 JavaScript 对象（`#1`），它也可以是一个返回对象的函数（`#2`），这个函数接受用户在 `siteConfig.themeConfig` 为第一个参数、包含编译期上下文的 [ctx](https://vuepress.vuejs.org/zh/plugin/context-api.html) 对象作为第二个参数。

```js
// .vuepress/theme/index.js
// #1
module.exports = {
   // ...
}
// .vuepress/theme/index.js
// #2
module.exports = (themeConfig, ctx) => {
   return {
      // ...
   }
}
```

提示

1. 你应该能看到 `themeEntry` 和 `themeConfig` 的区别，前者是一个主题本身的配置，这些配置由 VuePress 本身提供；而后者则是用户对主题的配置，这些配置选项则由当前使用的主题来实现，如 [默认主题配置](https://vuepress.vuejs.org/zh/theme/default-theme-config.html)。
2. 除了本节列出的选项，`themeEntry` 也支持插件支持的所有 [配置选项](https://vuepress.vuejs.org/zh/plugin/option-api.html) 和 [生命周期](https://vuepress.vuejs.org/zh/plugin/life-cycle.html)。

## [#](https://vuepress.vuejs.org/zh/theme/option-api.html#plugins)plugins

- 类型: `Array|Object`
- 默认值: undefined

**参考:**

- [插件 > 使用插件](https://vuepress.vuejs.org/zh/plugin/using-a-plugin.html).

------

注意

你可能不需要使用下面这些带有 Danger Zone 的选项，除非你知道你在做什么！

## [#](https://vuepress.vuejs.org/zh/theme/option-api.html#devtemplate)devTemplate Danger Zone

- 类型: `String`
- 默认值: undefined

dev 模式下使用的 HTML 模板路径，默认模板见 [这里 (opens new window)](https://github.com/vuejs/vuepress/blob/master/packages/%40vuepress/core/lib/client/index.dev.html)。

## [#](https://vuepress.vuejs.org/zh/theme/option-api.html#ssrtemplate)ssrTemplate Danger Zone

- 类型: `String`
- 默认值: undefined

build 模式下使用的 HTML 模板路径，默认模板见 [这里 (opens new window)](https://github.com/vuejs/vuepress/blob/master/packages/%40vuepress/core/lib/client/index.ssr.html)。

**参考:**

- [Vue SSR Guide > template (opens new window)](https://ssr.vuejs.org/zh/api/#createrenderer).

## [#](https://vuepress.vuejs.org/zh/theme/option-api.html#extend)extend Danger Zone

- 类型: `String`
- 默认值: undefined

```js
// .vuepress/theme/index.js
module.exports = {
  extend: '@vuepress/theme-default'
}
```

VuePress 支持一个主题继承于另一个主题。VuePress 将遵循 `override` 的理念自动帮你解决各种主题属性（如样式、布局组件）的优先级。

**参考:**

- [主题继承](https://vuepress.vuejs.org/zh/theme/inheritance.html)
- [例子: `@vuepress/theme-vue`(opens new window)](https://github.com/vuejs/vuepress/tree/master/packages/@vuepress/theme-vue)

## [#](https://vuepress.vuejs.org/zh/theme/option-api.html#globallayout)globalLayout Danger Zone

- 类型: `String`
- 默认值: undefined

```js
// .vuepress/theme/index.js
module.exports = {
  globalLayout: '/path/to/your/global/vue/sfc'
}
```

全局布局组件是负责管理全局布局方案的一个组件，VuePress [默认的 globalLayout (opens new window)](https://github.com/vuejs/vuepress/blob/master/packages/%40vuepress/core/lib/client/components/GlobalLayout.vue)会帮你根据 [$frontmatter.layout](https://vuepress.vuejs.org/zh/guide/frontmatter.html#layout) 来渲染不同的布局，所以大部分情况下你不要配置此选项。

举例来说，当你想为当前主题设置全局的 header 和 footer 时，你可以这样做：

```vue
<!-- .vuepress/theme/layouts/GlobalLayout.vue -->
<template>
  <div id="global-layout">
    <header><h1>Header</h1></header>
    <component :is="layout"/>
    <footer><h1>Footer</h1></footer>
  </div>
</template>

<script>
export default {
  computed: {
    layout () {
      if (this.$page.path) {
        if (this.$frontmatter.layout) {
          // 你也可以像默认的 globalLayout 一样首先检测 layout 是否存在
          return this.$frontmatter.layout
        }
        return 'Layout'
      }
      return 'NotFound'
    }
  }
}
</script>
```



# 默认主题配置

提示

本页所列的选项仅对默认主题生效。如果你在使用一个自定义主题，选项可能会有不同。

## [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#首页)首页

默认的主题提供了一个首页（Homepage）的布局 (用于 [这个网站的主页](https://vuepress.vuejs.org/zh/))。想要使用它，需要在你的根级 `README.md` 的 [YAML front matter](https://vuepress.vuejs.org/zh/guide/markdown.html#front-matter) 指定 `home: true`。以下是一个如何使用的例子：

```yaml
---
home: true
heroImage: /hero.png
heroText: Hero 标题
tagline: Hero 副标题
actionText: 快速上手 →
actionLink: /zh/guide/
features:
- title: 简洁至上
  details: 以 Markdown 为中心的项目结构，以最少的配置帮助你专注于写作。
- title: Vue驱动
  details: 享受 Vue + webpack 的开发体验，在 Markdown 中使用 Vue 组件，同时可以使用 Vue 来开发自定义主题。
- title: 高性能
  details: VuePress 为每个页面预渲染生成静态的 HTML，同时在页面被加载的时候，将作为 SPA 运行。
footer: MIT Licensed | Copyright © 2018-present Evan You
---
```

你可以将相应的内容设置为 `null` 来禁用标题和副标题。

任何 `YAML front matter` 之后额外的内容将会以普通的 markdown 被渲染，并插入到 `features` 的后面。

## [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#富文本-footer)富文本 footer

你还可以使用 [Markdown Slot Syntax](https://vuepress.vuejs.org/zh/guide/markdown-slot.html) 来设置 `footer`，以支持富文本：

```md
---
home: true
---

::: slot footer
MIT Licensed | Copyright © 2018-present [Evan You](https://github.com/yyx990803)
:::
```

## [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#导航栏)导航栏

导航栏可能包含你的页面标题、[搜索框](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#搜索框)、 [导航栏链接](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#导航栏链接)、[多语言切换](https://vuepress.vuejs.org/zh/guide/i18n.html)、[仓库链接](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#git-仓库和编辑链接)，它们均取决于你的配置。

### [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#导航栏-logo)导航栏 Logo

你可以通过 `themeConfig.logo` 增加导航栏 Logo ，Logo 可以被放置在[公共文件目录](https://vuepress.vuejs.org/zh/guide/assets.html#public-files)：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    logo: '/assets/img/logo.png',
  }
}
```

### [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#导航栏链接)导航栏链接

你可以通过 `themeConfig.nav` 增加一些导航栏链接:

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    nav: [
      { text: 'Home', link: '/' },
      { text: 'Guide', link: '/guide/' },
      { text: 'External', link: 'https://google.com' },
    ]
  }
}
```

外部链接 `<a>` 标签的特性将默认包含`target="_blank" rel="noopener noreferrer"`，你可以提供 `target` 与 `rel`，它们将被作为特性被增加到 `<a>` 标签上：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    nav: [
      { text: 'External', link: 'https://google.com', target:'_self', rel:'' },
      { text: 'Guide', link: '/guide/', target:'_blank' }
    ]
  }
}
```

当你提供了一个 `items` 数组而不是一个单一的 `link` 时，它将显示为一个 `下拉列表` ：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    nav: [
      {
        text: 'Languages',
        ariaLabel: 'Language Menu',
        items: [
          { text: 'Chinese', link: '/language/chinese/' },
          { text: 'Japanese', link: '/language/japanese/' }
        ]
      }
    ]
  }
}
```

此外，你还可以通过嵌套的 `items` 来在 `下拉列表` 中设置分组：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    nav: [
      {
        text: 'Languages',
        items: [
          { text: 'Group1', items: [/*  */] },
          { text: 'Group2', items: [/*  */] }
        ]
      }
    ]
  }
}
```

### [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#禁用导航栏)禁用导航栏

你可以使用 `themeConfig.navbar` 来禁用所有页面的导航栏：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    navbar: false
  }
}
```

你也可以通过 `YAML front matter` 来禁用某个指定页面的导航栏：

```yaml
---
navbar: false
---
```

## [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#侧边栏)侧边栏

想要使 侧边栏（Sidebar）生效，需要配置 `themeConfig.sidebar`，基本的配置，需要一个包含了多个链接的数组：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    sidebar: [
      '/',
      '/page-a',
      ['/page-b', 'Explicit link text']
    ]
  }
}
```

你可以省略 `.md` 拓展名，同时以 `/` 结尾的路径将会被视为 `*/README.md`，这个链接的文字将会被自动获取到（无论你是声明为页面的第一个 header，还是明确地在 `YAML front matter` 中指定页面的标题）。如果你想要显示地指定链接的文字，使用一个格式为 `[link, text]` 的数组。

### [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#嵌套的标题链接)嵌套的标题链接

默认情况下，侧边栏会自动地显示由当前页面的标题（headers）组成的链接，并按照页面本身的结构进行嵌套，你可以通过 `themeConfig.sidebarDepth` 来修改它的行为。默认的深度是 `1`，它将提取到 `h2` 的标题，设置成 `0` 将会禁用标题（headers）链接，同时，最大的深度为 `2`，它将同时提取 `h2` 和 `h3` 标题。

也可以使用 `YAML front matter` 来为某个页面重写此值：

```md
---
sidebarDepth: 2
---
```

### [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#显示所有页面的标题链接)显示所有页面的标题链接

默认情况下，侧边栏只会显示由当前活动页面的标题（headers）组成的链接，你可以将 `themeConfig.displayAllHeaders` 设置为 `true` 来显示所有页面的标题链接：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    displayAllHeaders: true // 默认值：false
  }
}
```

### [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#活动的标题链接)活动的标题链接

默认情况下，当用户通过滚动查看页面的不同部分时，嵌套的标题链接和 URL 中的 Hash 值会实时更新，这个行为可以通过以下的配置来禁用：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    activeHeaderLinks: false, // 默认值：true
  }
}
```

提示

值得一提的是，当你禁用此选项时，此功能的相应脚本将不会被加载，这是我们性能优化的一个小点。

### [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#侧边栏分组)侧边栏分组

你可以通过使用**对象**来将侧边栏划分成多个组：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    sidebar: [
      {
        title: 'Group 1',   // 必要的
        path: '/foo/',      // 可选的, 标题的跳转链接，应为绝对路径且必须存在
        collapsable: false, // 可选的, 默认值是 true,
        sidebarDepth: 1,    // 可选的, 默认值是 1
        children: [
          '/'
        ]
      },
      {
        title: 'Group 2',
        children: [ /* ... */ ],
        initialOpenGroupIndex: -1 // 可选的, 默认值是 0
      }
    ]
  }
}
```

侧边栏的每个子组默认是可折叠的，你可以设置 `collapsable: false` 来让一个组永远都是展开状态。

一个侧边栏的子组配置同时支持 [sidebarDepth](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#nested-header-links) 字段用于重写默认显示的侧边栏深度(`1`)。

提示

嵌套的侧边栏分组也是支持的。

### [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#多个侧边栏)多个侧边栏

如果你想为不同的页面组来显示不同的侧边栏，首先，将你的页面文件组织成下述的目录结构：

```text
.
├─ README.md
├─ contact.md
├─ about.md
├─ foo/
│  ├─ README.md
│  ├─ one.md
│  └─ two.md
└─ bar/
   ├─ README.md
   ├─ three.md
   └─ four.md
```

接着，遵循以下的侧边栏配置：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    sidebar: {
      '/foo/': [
        '',     /* /foo/ */
        'one',  /* /foo/one.html */
        'two'   /* /foo/two.html */
      ],

      '/bar/': [
        '',      /* /bar/ */
        'three', /* /bar/three.html */
        'four'   /* /bar/four.html */
      ],

      // fallback
      '/': [
        '',        /* / */
        'contact', /* /contact.html */
        'about'    /* /about.html */
      ]
    }
  }
}
```

注意

确保 fallback 侧边栏被最后定义。VuePress 会按顺序遍历侧边栏配置来寻找匹配的配置。

### [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#自动生成侧栏)自动生成侧栏

如果你希望自动生成一个仅仅包含了当前页面标题（headers）链接的侧边栏，你可以通过 `YAML front matter` 来实现：

```yaml
---
sidebar: auto
---
```

你也可以通过配置来在所有页面中启用它：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    sidebar: 'auto'
  }
}
```

在 [多语言](https://vuepress.vuejs.org/zh/guide/i18n.html) 模式下, 你也可以将其应用到某一特定的语言下：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
     '/zh/': {
       sidebar: 'auto'
     }
  }
}
```

### [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#禁用侧边栏)禁用侧边栏

你可以通过 `YAML front matter` 来禁用指定页面的侧边栏：

```yaml
---
sidebar: false
---
```

## [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#搜索框)搜索框

### [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#内置搜索)内置搜索

你可以通过设置 `themeConfig.search: false` 来禁用默认的搜索框，或是通过 `themeConfig.searchMaxSuggestions` 来调整默认搜索框显示的搜索结果数量：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    search: false,
    searchMaxSuggestions: 10
  }
}
```

你可以通过[在页面的 frontmatter 中设置 `tags`](https://vuepress.vuejs.org/zh/guide/frontmatter.html#tags) 来优化搜索结果：

```yaml
---
tags:
  - 配置
  - 主题
  - 索引
---
```

你可以通过[在页面的 frontmatter 中设置 `search`](https://vuepress.vuejs.org/zh/guide/frontmatter.html#search) 来对单独的页面禁用内置的搜索框：

```yaml
---
search: false
---
```

提示

内置搜索只会为页面的标题、`h2` 、 `h3` 以及 `tags` 构建搜索索引。 如果你需要全文搜索，你可以使用 [Algolia 搜索](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#algolia-搜索)。

### [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#algolia-搜索)Algolia 搜索

你可以通过 `themeConfig.algolia` 选项来用 [Algolia 搜索 (opens new window)](https://community.algolia.com/docsearch/)替换内置的搜索框。要启用 Algolia 搜索，你需要至少提供 `apiKey` 和 `indexName`：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    algolia: {
      apiKey: '<API_KEY>',
      indexName: '<INDEX_NAME>'
      // 如果 Algolia 没有为你提供 `appId` ，使用 `BH4D9OD16A` 或者移除该配置项
      appId: '<APP_ID>',
    }
  }
}
```

注意

不同于开箱即用的 [内置搜索](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#内置搜索)，[Algolia 搜索 (opens new window)](https://community.algolia.com/docsearch/)需要你在使用之前将你的网站提交给它们用于创建索引。

更多选项请参考 [Algolia DocSearch 的文档 (opens new window)](https://github.com/algolia/docsearch#docsearch-options)。

## [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#最后更新时间)最后更新时间

你可以通过 `themeConfig.lastUpdated` 选项来获取每个文件最后一次 `git` 提交的 UNIX 时间戳(ms)，同时它将以合适的日期格式显示在每一页的底部：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    lastUpdated: 'Last Updated', // string | boolean
  }
}
```

请注意，`themeConfig.lastUpdated` 默认是关闭的，如果给定一个字符串，它将会作为前缀显示（默认值是：`Last Updated`）。

使用须知

由于 `lastUpdated` 是基于 `git` 的, 所以你只能在一个基于 `git` 的项目中启用它。此外，由于使用的时间戳来自 git commit，因此它将仅在给定页的第一次提交之后显示，并且仅在该页面后续提交更改时更新。

**拓展阅读:**

- [@vuepress/plugin-last-updated](https://vuepress.vuejs.org/zh/plugin/official/plugin-last-updated.html)

## [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#上-下一篇链接)上 / 下一篇链接

上一篇和下一篇文章的链接将会自动地根据当前页面的侧边栏的顺序来获取。

你可以通过 `themeConfig.nextLinks` 和 `themeConfig.prevLinks` 来全局禁用它们：

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    // 默认值是 true 。设置为 false 来禁用所有页面的 下一篇 链接
    nextLinks: false,
    // 默认值是 true 。设置为 false 来禁用所有页面的 上一篇 链接
    prevLinks: false
  }
}
```

你也可以使用 `YAML front matter` 来明确地重写或者禁用它们：

```yaml
---
prev: ./some-other-page
next: false
---
```

## [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#git-仓库和编辑链接)Git 仓库和编辑链接

当你提供了 `themeConfig.repo` 选项，将会自动在每个页面的导航栏生成一个 GitHub 链接，以及在页面的底部生成一个 `"Edit this page"` 链接。

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    // 假定是 GitHub. 同时也可以是一个完整的 GitLab URL
    repo: 'vuejs/vuepress',
    // 自定义仓库链接文字。默认从 `themeConfig.repo` 中自动推断为
    // "GitHub"/"GitLab"/"Bitbucket" 其中之一，或是 "Source"。
    repoLabel: '查看源码',

    // 以下为可选的编辑链接选项

    // 假如你的文档仓库和项目本身不在一个仓库：
    docsRepo: 'vuejs/vuepress',
    // 假如文档不是放在仓库的根目录下：
    docsDir: 'docs',
    // 假如文档放在一个特定的分支下：
    docsBranch: 'master',
    // 默认是 false, 设置为 true 来启用
    editLinks: true,
    // 默认为 "Edit this page"
    editLinkText: '帮助我们改善此页面！'
  }
}
```

你可以通过 `YAML front matter` 来禁用指定页面的编辑链接：

```yaml
---
editLink: false
---
```

## [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#页面滚动)页面滚动 1.2.0+

你可以通过 `themeConfig.smoothScroll` 选项来启用页面滚动效果。

```js
// .vuepress/config.js
module.exports = {
  themeConfig: {
    smoothScroll: true
  }
}
```

## [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#自定义页面类)自定义页面类

有时候你可能需要为特定页面添加一个 CSS 类名，以方便针对该页面添加一些专门的 CSS。这种情况下你可以在该页面的 YAML front matter 中声明一个 `pageClass`：

```yaml
---
pageClass: custom-page-class
---
```

只能在 `.vuepress/styles/index.styl` 中编写针对该页面的 CSS ：

```css
/* .vuepress/styles/index.styl */

.theme-container.custom-page-class {
  /* 特定页面的 CSS */
}
```

注意

自定义样式应该写在 [index.styl](https://vuepress.vuejs.org/config/#index-styl) 内, 该文件可以让你方便地添加或覆盖样式.

## [#](https://vuepress.vuejs.org/zh/theme/default-theme-config.html#特定页面的自定义布局)特定页面的自定义布局

默认情况下，每个 `*.md` 文件将会被渲染在一个 `<div class="page">` 容器中，同时还有侧边栏、自动生成的编辑链接，以及上 / 下一篇文章的链接。如果你想要使用一个完全自定义的组件来代替当前的页面（而只保留导航栏），你可以再次使用 `YAML front matter` 来指定这个组件。

```yaml
---
layout: SpecialLayout
---
```

这将会为当前的页面渲染 `.vuepress/components/SpecialLayout.vue` 布局。

# 博客主题

## [#](https://vuepress.vuejs.org/zh/theme/blog-theme.html#网站)网站

- [文档(opens new window)](https://vuepress-theme-blog.billyyyyy3320.com/)
- [线上范例(opens new window)](https://example.vuepress-theme-blog.billyyyyy3320.com/)
- [线上范例 - Billyyyyy3320's space(opens new window)](https://billyyyyy3320.com/)

## [#](https://vuepress.vuejs.org/zh/theme/blog-theme.html#安装)安装

```bash
yarn add @vuepress/theme-blog -D
# OR npm install @vuepress/theme-blog -D
```

## [#](https://vuepress.vuejs.org/zh/theme/blog-theme.html#使用)使用

```js
// .vuepress/config.js
module.exports = {
  theme: '@vuepress/blog',
  themeConfig: {
    // 请参考文档来查看所有可用的选项。
  }
}
```



# 主题的继承

## [#](https://vuepress.vuejs.org/zh/theme/inheritance.html#动机)动机

我们有两个主要的理由来支持这个特性：

1. VuePress 为开发者提供了一个[默认主题](https://vuepress.vuejs.org/zh/theme/default-theme-config.html)，它能在大多数场景下满足了文档编写者的需求。即便如此，仍然还是会有不少用户选择将其 eject 出来进行修改，即使他们可能只是想要修改其中的某个组件。

2. 在 [0.x (opens new window)](https://vuepress.vuejs.org/guide/custom-themes.html#site-and-page-metadata)中，主题的入口只需要一个 `Layout.vue`，所以我们可以通过包装另一个主题的 `Layout.vue` 来实现简单的拓展。

   到了 1.x 中，一个主题的元素开始变得复杂，我们开始有了[主题级别的配置](https://vuepress.vuejs.org/zh/theme/option-api.html)，它支持为主题添加插件、自定义 GlobalLayout 等。除此之外，我们还有一些引入了主题开发的 [目录结构的约定](https://vuepress.vuejs.org/zh/theme/writing-a-theme.html#目录结构)，如 `styles/index.styl`，在这样的背景下，我们无法使用 0.x 的方式来实现继承了。

因此，我们需要提供一种合理、可靠的主题继承方案。

## [#](https://vuepress.vuejs.org/zh/theme/inheritance.html#概念)概念

为了介绍本节，我们先几个基本概念：

- **原子主题**：即父主题，类似默认主题这种完全从头实现的主题。
- **派生主题**：即子主题，基于父主题创建的主题；

提示

主题继承暂时不支持高阶继承，也就是说，一个派生主题无法被继承。

## [#](https://vuepress.vuejs.org/zh/theme/inheritance.html#使用)使用

假设你想创建一个继承自 VuePress 默认主题的派生主题，你只需要在你的主题配置中配置 [extend](https://vuepress.vuejs.org/zh/theme/option-api.html#extend) 选项：

```js
// .vuepress/theme/index.js
module.exports = {
  extend: '@vuepress/theme-default'
}
```

## [#](https://vuepress.vuejs.org/zh/theme/inheritance.html#继承策略)继承策略

父主题的所有能力都会"传递"给子主题，对于文件级别的约定，子主题可以通过在同样的位置创建同名文件来覆盖它；对于某些主题配置选项，如 [globalLayout](https://vuepress.vuejs.org/zh/theme/option-api.html#globallayout)，子主题也可以通过同名配置来覆盖它。

[文件级别的约定](https://vuepress.vuejs.org/zh/theme/writing-a-theme.html#目录结构)如下：

- **全局组件**，即放置在 `theme/global-components` 中的 Vue 组件。
- **组件**，即放置在 `theme/components` 中的 Vue 组件。
- **全局的样式和调色板**，即放置在 `theme/styles` 中的 `index.styl` 和 `palette.styl`。
- **HTML 模板**，即放置在 `theme/templates` 中的 `dev.html` 和 `ssr.html`。
- **主题水平的客户端增强文件**，即 `theme/enhanceApp.js`

对于主题配置，能被子主题覆盖的配置选项如下：

- [devTemplate](https://vuepress.vuejs.org/zh/theme/option-api.html#devtemplate)
- [ssrTemplate](https://vuepress.vuejs.org/zh/theme/option-api.html#ssrtemplate)
- [globalLayout](https://vuepress.vuejs.org/zh/theme/option-api.html#globallayout)

无法被子主题覆盖的主题配置选项如下：

- [extend](https://vuepress.vuejs.org/zh/theme/option-api.html#extend)

需要特殊处理的主题选项：

- [plugins](https://vuepress.vuejs.org/zh/theme/option-api.html#plugins)：参见 [插件的覆盖](https://vuepress.vuejs.org/zh/theme/inheritance.html#插件的覆盖)。

## [#](https://vuepress.vuejs.org/zh/theme/inheritance.html#插件的覆盖)插件的覆盖

对于父主题中的 [plugins](https://vuepress.vuejs.org/zh/theme/option-api.html#plugins), 子主题不会直接覆盖它，但是插件的选项可以通过创建同名的插件配置来覆盖。

举例来说，如果父主题具有如下配置：

```js
// parentThemePath/index.js
module.exports = {
  plugins: [
    ['@vuepress/search', {
      searchMaxSuggestions: 5
    }]
  ]
}
```

那么子主题可以通过如下方式来修改该插件的默认值：

```js
// .vuepress/theme/index.js
module.exports = {
  plugins: [
    ['@vuepress/search', {
      searchMaxSuggestions: 10
    }]
  ]
}
```

也可以选择禁用它：

```js
// .vuepress/theme/index.js
module.exports = {
  plugins: [
    ['@vuepress/search', false]
  ]
}
```

注意

一般情况下，你都不需要这样做，除非你明确知道禁用父主题中的插件不会带来问题。

## [#](https://vuepress.vuejs.org/zh/theme/inheritance.html#组件的覆盖)组件的覆盖

你可能想要在子主题中覆盖父主题中的同名组件，默认情况下，当父主题中的组件都使用相对路径引用其他组件时，你将不可能做到这一点，因为你无法在运行时修改父主题的代码。

VuePress 则通过一种巧妙的方式实现了这种需求，但这对父主题有一定的要求——**所有的组件都必须使用 `@theme` 别名来引用其他组件**。

举例来说，如果你正在开发的一个原子主题的结构如下：

```
theme
├── components
│   ├── Home.vue
│   ├── Navbar.vue
│   └── Sidebar.vue
├── layouts
│   ├── 404.vue
│   └── Layout.vue
├── package.json
└── index.js
```

那么，在该主题中的任意 Vue 组件中，**你都应该通过 `@theme` 来访问主题根目录**：

```vue
<script>
import Navbar from '@theme/components/Navbar.vue'
// ...
</script>
```

在这样的前提下，当你在子主题中同样的位置创建一个 `Navbar` 组件时：

```
theme
└── components
   └── Navbar.vue
```

`@theme/components/Navbar.vue` 会自动地映射到子主题中的 Navbar 组件，当你移除这个组件时，`@theme/components/Navbar.vue` 又会自动恢复为父主题中的 Navbar 组件。

如此一来，就可以实现轻松地“篡改”一个原子主题的某个部分。

提示

1. 组件的覆盖，最好直接基于父主题中对应组件的代码来修改；
2. 目前，在本地开发子主题，每次创建或移除组件时，你需要手动重启 Dev Server。

## [#](https://vuepress.vuejs.org/zh/theme/inheritance.html#访问父主题)访问父主题

你可以使用 `@parent-theme` 来访问父主题的根路径，下述示例展示了在子主题中创建一个同名的布局组件，并简单使用父主题中的 slot，[@vuepress/theme-vue (opens new window)](https://github.com/vuejs/vuepress/tree/master/packages/%40vuepress/theme-vue)便是通过这种方式创造的。

```vue
<!-- .vuepress/theme/components/Foo.vue -->
<template>
  <ParentLayout>
    <Foo #foo/>
  </ParentLayout>
</template>

<script>
import ParentLayout from '@parent-theme/layouts/Layout.vue'
import Foo from '@theme/components/Foo.vue'

export default {
  components: {
    ParentLayout,
    Foo
  }
}
</script>
```































