# 分步教程

## 1. 设置

欢迎来到 Jekyll 的分步教程。本教程需要 您从拥有一些前端Web开发经验到构建您的 从头开始的第一个 Jekyll 网站，不依赖于默认的基于 gem 的主题。

## 安装[永久链接](http://jekyllrb.com/docs/step-by-step/01-setup/#installation)

杰基尔是一颗红宝石。首先，在您的机器上安装 Ruby。 转到[安装](http://jekyllrb.com/docs/installation/)并按照 适用于您的操作系统的说明。

安装 Ruby 后，从终端安装 Jekyll：

```
gem install jekyll bundler
```

创建一个新的以列出项目的依赖项：`Gemfile`

```
bundle init
```

在文本编辑器中编辑 并将 jekyll 添加为依赖项：`Gemfile`

```
gem "jekyll"
```

运行以为您的项目安装 jekyll。`bundle`

现在，您可以在本教程中列出的所有 jekyll 命令前面加上前缀，以确保使用在 .`bundle exec``Gemfile`

## 创建网站[永久链接](http://jekyllrb.com/docs/step-by-step/01-setup/#create-a-site)

是时候创建一个网站了！为站点和名称创建新目录 随心所欲。在本教程的其余部分，我们将参考以下内容 目录作为**根目录**。

您还可以在此处初始化 Git 存储库。

Jekyll 的一大优点是没有数据库。所有内容和 站点结构是 Git 存储库可以版本控制的文件。使用存储库 是可选的，但建议这样做。您可以了解更多信息 通过阅读 [Git 手册](https://guides.github.com/introduction/git-handbook/)来了解使用 Git。

让我们添加您的第一个文件。使用以下方法在**根**中创建 内容：`index.html`

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Home</title>
  </head>
  <body>
    <h1>Hello World!</h1>
  </body>
</html>
```

## 建[永久链接](http://jekyllrb.com/docs/step-by-step/01-setup/#build)

由于 Jekyll 是一个静态站点生成器，因此它必须构建站点 在我们查看它之前。运行以下命令之一来构建站点：

- `jekyll build` - Builds the site and outputs a static site to a directory called .`_site`
- `jekyll serve` - Does and runs it on a local web server at , rebuilding the site any time you make a change.`jekyll build``http://localhost:4000`

When you’re developing a site, use . To force the browser to refresh with every change, use . If there’s a conflict or you’d like Jekyll to serve your development site at a different URL, use the and arguments, as described in the [serve command options](http://jekyllrb.com/docs/configuration/options/#serve-command-options).`jekyll serve``jekyll serve --livereload``--host``--port`

The version of the site that builds in is not suited for deployment. Links and asset URLs in sites created with will use or the value set with command-line configuration, instead of the values set in [your site’s configuration file](http://jekyllrb.com/docs/configuration/). To learn about how to build your site when it’s ready for deployment, read the [Deployment](http://jekyllrb.com/docs/step-by-step/10-deployment/) section of this tutorial.`jekyll serve``_site``jekyll serve``https://localhost:4000`

运行并转到 [http://localhost:4000](http://localhost:4000/) 您的浏览器。您应该看到“Hello World！`jekyll serve`

在这一点上，你可能会想，“那又怎样？唯一发生的事情是杰基尔复制了一个 HTML 文件从一个地方到另一个地方。

耐心，年轻的蚱蜢，有 还有很多东西要学！

下一个。您将了解液体和模板。

**返回**

[下一个](http://jekyllrb.com/docs/step-by-step/02-liquid/)

1. [设置](http://jekyllrb.com/docs/step-by-step/01-setup/)
2. [液](http://jekyllrb.com/docs/step-by-step/02-liquid/)
3. [前言](http://jekyllrb.com/docs/step-by-step/03-front-matter/)
4. [布局](http://jekyllrb.com/docs/step-by-step/04-layouts/)
5. [包括](http://jekyllrb.com/docs/step-by-step/05-includes/)
6. [数据文件](http://jekyllrb.com/docs/step-by-step/06-data-files/)
7. [资产](http://jekyllrb.com/docs/step-by-step/07-assets/)
8. [博客](http://jekyllrb.com/docs/step-by-step/08-blogging/)
9. [收集](http://jekyllrb.com/docs/step-by-step/09-collections/)
10. [部署](http://jekyllrb.com/docs/step-by-step/10-deployment/)



# 分步教程

## 2. 液体

液体是杰基尔开始变得更有趣的地方。这是一个模板 语言有三个主要组成部分：

- [对象](http://jekyllrb.com/docs/step-by-step/02-liquid/#objects)
- [标签](http://jekyllrb.com/docs/step-by-step/02-liquid/#tags)
- [过滤 器](http://jekyllrb.com/docs/step-by-step/02-liquid/#filters)

## 对象[永久链接](http://jekyllrb.com/docs/step-by-step/02-liquid/#objects)

对象告诉 Liquid 将预定义[的变量](http://jekyllrb.com/docs/variables/)输出为页面上的内容。对对象使用双大括号：和 。`{{``}}`

例如，显示变量。`{{ page.title }}``page.title`

## 标签[永久链接](http://jekyllrb.com/docs/step-by-step/02-liquid/#tags)

标记定义模板的逻辑和控制流。使用卷曲 标记的大括号和百分号：和 。`{%``%}`

例如：

```
{% if page.show_sidebar %}
  <div class="sidebar">
    sidebar content
  </div>
{% endif %}
```

如果页面变量的值为 true，则会显示侧边栏。`show_sidebar`

[在此处](http://jekyllrb.com/docs/liquid/tags/)了解有关 Jekyll 中可用标签的更多信息。

## 过滤 器[永久链接](http://jekyllrb.com/docs/step-by-step/02-liquid/#filters)

滤镜更改液体对象的输出。它们在输出中使用 并用 .`|`

例如：

```
{{ "hi" | capitalize }}
```

这将显示而不是 。`Hi``hi`

[详细了解可用的过滤器](http://jekyllrb.com/docs/liquid/filters/)。

## 使用液体[永久链接](http://jekyllrb.com/docs/step-by-step/02-liquid/#use-liquid)

现在，使用 Liquid 将[安装程序](http://jekyllrb.com/docs/step-by-step/01-setup/)中的文本设置为小写：`Hello World!`

```
...
<h1>{{ "Hello World!" | downcase }}</h1>
...
```

要让 Jekyll 处理您的更改，请在页面顶部添加[前言](http://jekyllrb.com/docs/step-by-step/03-front-matter/)：

```
---
# front matter tells Jekyll to process Liquid
---
```

Your HTML document should look like this:

```
---
---

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Home</title>
  </head>
  <body>
    <h1>{{ "Hello World!" | downcase }}</h1>
  </body>
</html>
```

重新加载浏览器时，应会看到 。`hello world!`

Jekyll 的大部分功能来自将 Liquid 与其他功能相结合。将前言添加到页面中，使 Jekyll 处理这些页面上的液体。

接下来，您将了解有关前言的更多信息。

[返回](http://jekyllrb.com/docs/step-by-step/01-setup/)

[下一个](http://jekyllrb.com/docs/step-by-step/03-front-matter/)

## 3. 前言

前言是放置在两个之间的 [YAML](http://yaml.org/) 片段 文件开头的三段虚线。

您可以使用前言为页面设置变量：

```
---
my_number: 5
---
```

您可以使用变量在 Liquid 中调用前言变量。为 示例，要输出上述变量的值：`page``my_number`

```
{{ page.my_number }}
```

## 使用前置材料

更改您网站上使用前言：`<title>`

```
---
title: Home
---
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{{ page.title }}</title>
  </head>
  <body>
    <h1>{{ "Hello World!" | downcase }}</h1>
  </body>
</html>
```

*您必须*在页面上包含前言，以便 Jekyll 处理其上的任何 Liquid 标签。

要使 Jekyll 在不定义前言变量的情况下处理页面，请使用：

```
---
---
```

接下来，您将了解有关布局的更多信息，以及为什么您的页面使用比纯 HTML 更多的源代码。

## 4. 布局

Jekyll 在构建页面时除了支持 HTML 之外还支持 [Markdown](https://daringfireball.net/projects/markdown/syntax)。Markdown 是具有简单页面的绝佳选择 内容结构（只是段落，标题和图像），因为它不那么冗长 比原始 HTML。

创建一个在站点的根文件夹中命名的新 Markdown 文件。`about.md`

您可以复制 的内容并针对“关于”页面对其进行修改。然而 这将创建重复的代码，必须为您添加的每个新页面自定义这些代码 到您的网站。`index`

例如，向您的网站添加新样式表将涉及添加链接 到样式表到每个页面的。对于具有许多页面的网站，此 是浪费时间。`<head>`

## 创建布局[永久链接](http://jekyllrb.com/docs/step-by-step/04-layouts/#creating-a-layout)

布局是可供网站中的任何页面使用并环绕页面内容的模板。 它们存储在名为 的目录中。`_layouts`

在站点的根文件夹中创建目录，并创建一个包含以下内容的新文件：`_layouts``default.html`

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{{ page.title }}</title>
  </head>
  <body>
    {{ content }}
  </body>
</html>
```

这个 HTML 几乎相同，除了有 没有前言，页面的内容被变量替换。`index.html``content`

`content`是一个特殊变量，返回渲染的 调用它的页面的内容。

## 使用布局[永久链接](http://jekyllrb.com/docs/step-by-step/04-layouts/#use-layouts)

要使用新布局，请在前面设置变量 事。该文件应如下所示：`index.html``layout`

```
---
layout: default
title: Home
---
<h1>{{ "Hello World!" | downcase }}</h1>
```

重新加载站点时，输出保持不变。

由于布局环绕页面上的内容，因此您可以像在布局文件中一样调用前言。将布局应用于页面时，它将使用该页面上的前置内容。`page`

## 构建“关于”页面[永久链接](http://jekyllrb.com/docs/step-by-step/04-layouts/#build-the-about-page)

添加以下内容以在“关于”页面中使用新布局：`about.md`

```
---
layout: default
title: About
---
# About page

This page tells you a little bit about me.
```

在浏览器中打开 http://localhost:4000/about.html 并查看新页面。

恭喜，您现在有一个两页的网站！

接下来，您将了解如何在站点中从一个页面导航到另一个页面。

## 5. 包括

该网站正在聚集在一起;但是，无法在 .pages。让我们解决这个问题。

导航应该在每个页面上，因此将其添加到布局是正确的 这样做的地方。而不是直接将其添加到布局中，让我们使用它 作为了解包括的机会。

## 包含标记

该标记允许您包含存储的其他文件中的内容 在文件夹中。包含对于拥有单一来源很有用 在网站上重复或用于提高可读性的源代码。`include``_includes`

导航源代码可能会变得复杂，因此有时将其移动到 包括。

## 包括使用情况

创建一个用于导航的文件，使用 以下内容：`_includes/navigation.html`

```
<nav>
  <a href="/">Home</a>
  <a href="/about.html">About</a>
</nav>
```

尝试使用 include 标记将导航添加到：`_layouts/default.html`

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{{ page.title }}</title>
  </head>
  <body>
    {% include navigation.html %}
    {{ content }}
  </body>
</html>
```

在浏览器中打开 [http://localhost:4000](http://localhost:4000/)，然后尝试在页面之间切换。

## 当前页面突出显示

让我们更进一步，在导航中突出显示当前页面。

```
_includes/navigation.html`需要知道插入页面的网址 所以它可以添加样式。杰基尔有可用的[有用变量](http://jekyllrb.com/docs/variables/)， 其中之一是.`page.url
```

使用您可以检查每个链接是否是当前页面并将其着色为红色 如果为真：`page.url`

```
<nav>
  <a href="/" {% if page.url == "/" %}style="color: red;"{% endif %}>
    Home
  </a>
  <a href="/about.html" {% if page.url == "/about.html" %}style="color: red;"{% endif %}>
    About
  </a>
</nav>
```

查看 [http://localhost:4000](http://localhost:4000/) 并查看当前页面的红色链接。

如果您想向 导航或更改突出显示颜色。在下一步中，我们将解决此问题。

## 6. 数据文件

Jekyll 支持从位于目录中的 YAML、JSON 和 CSV 文件加载数据。数据文件是将内容与源代码分离到 使网站更易于维护。`_data`

在此步骤中，您将导航的内容存储在数据文件中 然后在导航包含中迭代它。

## 数据文件使用情况

[YAML](http://yaml.org/) 是 Ruby 生态系统中常见的一种格式。你会 使用它来存储导航项的数组，每个导航项都有一个名称和链接。

创建用于导航的数据文件 以后：`_data/navigation.yml`

```
- name: Home
  link: /
- name: About
  link: /about.html
```

Jekyll 在 上为您提供此数据文件。相反 输出每个环节，现在可以迭代了 而是数据文件：`site.data.navigation``_includes/navigation.html`

```
<nav>
  {% for item in site.data.navigation %}
    <a href="{{ item.link }}" {% if page.url == item.link %}style="color: red;"{% endif %}>
      {{ item.name }}
    </a>
  {% endfor %}
</nav>
```

输出将完全相同。不同之处在于你让它更容易 添加新的导航项并更改 HTML 结构。

没有CSS，JS和图像的网站有什么用？让我们看看如何处理 杰基尔的资产。

## 7. 资产

使用CSS，JS，图像和其他资产对于Jekyll来说很简单。地方 它们在您的站点文件夹中，它们将复制到构建的站点。

Jekyll 网站经常使用此结构来保持资产井井有条：

```
.
├── assets
│   ├── css
│   ├── images
│   └── js
...
```

因此，从您的资产文件夹中，创建名为 css、图像和 js 的文件夹。 此外，直接在根目录下创建另一个名为“_sass”的文件夹，您很快就会需要它。

## 萨斯

内联 中使用的样式（在同一文件中添加或配置）不是最佳做法。 相反，让我们通过在新的 css 文件中定义我们的第一个类来设置当前页面的样式。`_includes/navigation.html`

为此，请从 navigation.html 文件中引用该类（您将在此步骤的下一部分配置），方法是删除之前添加的代码（将当前链接着色为红色）并插入以下代码：

```
<nav>
  {% for item in site.data.navigation %}
    <a href="{{ item.link }}" {% if page.url == item.link %}class="current"{% endif %}>{{ item.name }}</a>
  {% endfor %}
</nav>
```

您可以使用标准的CSS文件进行样式设置，我们将采取步骤。 进一步通过使用[萨斯](https://sass-lang.com/)。萨斯是一个很棒的扩展 到 CSS 直接烘焙到 Jekyll 中。

首先创建一个包含以下内容的 Sass 文件：`assets/css/styles.scss`

```
---
---
@import "main";
```

顶部的空前言告诉 Jekyll 它需要处理文件。告诉萨斯寻找一个在sass中调用的文件 目录（）默认情况下，您已经直接在网站的根文件夹下创建）。`@import "main"``main.scss``_sass/`

在这个阶段，你只有一个主要的css文件。对于较大的项目，这是一个 保持 CSS 井井有条的好方法。

创建上面提到的当前类，以便将当前链接着色为绿色。在 创建包含以下内容的 Sass 文件：`_sass/main.scss`

```
.current {
  color: green;
}
```

您需要在布局中引用样式表。

打开样式表并将其添加到：`_layouts/default.html``<head>`

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{{ page.title }}</title>
    <link rel="stylesheet" href="/assets/css/styles.css">
  </head>
  <body>
    {% include navigation.html %}
    {{ content }}
  </body>
</html>
```

此处引用的内容由 Jekyll 根据您之前在中创建的 生成。`styles.css``styles.scss``assets/css/`

加载 [http://localhost:4000](http://localhost:4000/) 并检查导航中的活动链接是否为绿色。

接下来，我们将介绍Jekyll最受欢迎的功能之一，博客。

## 8. 博客

您可能想知道如何在没有数据库的情况下拥有博客。在真 杰基尔风格，博客仅由文本文件提供支持。

## 职位

博客文章位于名为 的文件夹中。帖子的文件名具有 特殊格式：发布日期，然后是标题，后跟扩展名。`_posts`

创建您的第一篇文章 以下内容：`_posts/2018-08-20-bananas.md`

```
---
layout: post
author: jill
---

A banana is an edible fruit – botanically a berry – produced by several
kinds of large herbaceous flowering plants in the genus Musa.

In some countries, bananas used for cooking may be called "plantains",
distinguishing them from dessert bananas. The fruit is variable in size,
color, and firmness, but is usually elongated and curved, with soft
flesh rich in starch covered with a rind, which may be green, yellow,
red, purple, or brown when ripe.
```

这就像您之前创建的一样，除了它有一个作者和 不同的布局。 是一个自定义变量，它不是必需的，可以 被命名为类似.`about.md``author``creator`

## 布局

布局不存在，因此您需要在 创建它，其中包含以下内容：`post``_layouts/post.html`

```
---
layout: default
---
<h1>{{ page.title }}</h1>
<p>{{ page.date | date_to_string }} - {{ page.author }}</p>

{{ content }}
```

这是布局继承的一个示例。帖子布局输出标题， 日期、作者和内容正文，由默认布局包装。

另请注意过滤器，这会将日期格式化为更好的格式。`date_to_string`

## 列出帖子

目前无法导航到博客文章。通常，博客具有 列出所有帖子的页面，让我们接下来这样做。

Jekyll 在 上提供帖子。`site.posts`

在根 （） 中创建以下内容：`blog.html``/blog.html`

```
---
layout: default
title: Blog
---
<h1>Latest Posts</h1>

<ul>
  {% for post in site.posts %}
    <li>
      <h2><a href="{{ post.url }}">{{ post.title }}</a></h2>
      {{ post.excerpt }}
    </li>
  {% endfor %}
</ul>
```

使用此代码需要注意以下几点：

- `post.url`由杰基尔自动设置为帖子的输出路径
- `post.title`从帖子文件名中提取，可以由 设置在前面`title`
- `post.excerpt`默认为第一段内容

您还需要一种方法通过主导航导航到此页面。打开并添加博客页面的条目：`_data/navigation.yml`

```
- name: Home
  link: /
- name: About
  link: /about.html
- name: Blog
  link: /blog.html
```

## 更多帖子

一个博客并不是很令人兴奋。再添加一些：

`_posts/2018-08-21-apples.md`:

```
---
layout: post
author: jill
---
An apple is a sweet, edible fruit produced by an apple tree.

Apple trees are cultivated worldwide, and are the most widely grown
species in the genus Malus. The tree originated in Central Asia, where
its wild ancestor, Malus sieversii, is still found today. Apples have
been grown for thousands of years in Asia and Europe, and were brought
to North America by European colonists.
```

`_posts/2018-08-22-kiwifruit.md`:

```
---
layout: post
author: ted
---
Kiwifruit (often abbreviated as kiwi), or Chinese gooseberry is the
edible berry of several species of woody vines in the genus Actinidia.

The most common cultivar group of kiwifruit is oval, about the size of
a large hen's egg (5–8 cm (2.0–3.1 in) in length and 4.5–5.5 cm
(1.8–2.2 in) in diameter). It has a fibrous, dull greenish-brown skin
and bright green or golden flesh with rows of tiny, black, edible
seeds. The fruit has a soft texture, with a sweet and unique flavor.
```

打开 [http://localhost:4000](http://localhost:4000/) 并浏览您的博客文章。

接下来，我们将专注于为每个帖子作者创建一个页面。

## 9. 收藏

让我们看看充实作者，以便每个作者都有自己的页面，其中包含 简介和他们发布的帖子。

为此，您将使用集合。集合与帖子类似，但 内容不必按日期分组。

## 配置

要设置集合，您需要告诉 Jekyll 有关它的信息。杰基尔配置 发生在名为 （默认情况下） 的文件中。`_config.yml`

使用以下内容在根中创建：`_config.yml`

```
collections:
  authors:
```

要（重新）加载配置，请重新启动 jekyll 服务器。在终端中按 + 停止服务器，然后重新启动它。`Ctrl``C``jekyll serve`

## 添加作者

文档（集合中的项目）位于网站根目录的文件夹中 叫。在这种情况下，.`_*collection_name*``_authors`

为每个作者创建一个文档：

`_authors/jill.md`:

```
---
short_name: jill
name: Jill Smith
position: Chief Editor
---
Jill is an avid fruit grower based in the south of France.
```

`_authors/ted.md`:

```
---
short_name: ted
name: Ted Doe
position: Writer
---
Ted has been eating fruit since he was baby.
```

## 员工页面

让我们添加一个页面，其中列出了网站上的所有作者。杰基尔使 可在 上收集。`site.authors`

创建并迭代以输出所有员工：`staff.html``site.authors`

```
---
layout: default
title: Staff
---
<h1>Staff</h1>

<ul>
  {% for author in site.authors %}
    <li>
      <h2>{{ author.name }}</h2>
      <h3>{{ author.position }}</h3>
      <p>{{ author.content | markdownify }}</p>
    </li>
  {% endfor %}
</ul>
```

由于内容是降价的，因此您需要通过过滤器运行它。在布局中使用输出时，这会自动发生。`markdownify``{{ content }}`

您还需要一种方法通过主导航导航到此页面。打开并添加员工页面的条目：`_data/navigation.yml`

```
- name: Home
  link: /
- name: About
  link: /about.html
- name: Blog
  link: /blog.html
- name: Staff
  link: /staff.html
```

## 输出页面

默认情况下，集合不输出文档页面。在这种情况下，我们 希望每个作者都有自己的页面，所以让我们调整集合 配置。

打开并添加到作者收藏 配置：`_config.yml``output: true`

```
collections:
  authors:
    output: true
```

再次重新启动 jekyll 服务器以使配置更改生效。

您可以使用 链接到输出页面。`author.url`

将链接添加到页面：`staff.html`

```
---
layout: default
title: Staff
---
<h1>Staff</h1>

<ul>
  {% for author in site.authors %}
    <li>
      <h2><a href="{{ author.url }}">{{ author.name }}</a></h2>
      <h3>{{ author.position }}</h3>
      <p>{{ author.content | markdownify }}</p>
    </li>
  {% endfor %}
</ul>
```

就像帖子一样，您需要为作者创建布局。

使用以下内容创建：`_layouts/author.html`

```
---
layout: default
---
<h1>{{ page.name }}</h1>
<h2>{{ page.position }}</h2>

{{ content }}
```

## 前言默认值

现在，您需要将创作文档配置为使用布局。你 可以像我们以前一样在前言中做到这一点，但这正在得到 重复。`author`

你真正想要的是所有帖子都自动拥有帖子 布局，作者有作者，其他所有内容都使用默认值。

您可以通过在 中使用[前言默认值](http://jekyllrb.com/docs/configuration/front-matter-defaults/)来实现此目的。您设置默认值适用的范围，然后 您想要的默认前言。`_config.yml`

将布局的默认值添加到 ，`_config.yml`

```
collections:
  authors:
    output: true

defaults:
  - scope:
      path: ""
      type: "authors"
    values:
      layout: "author"
  - scope:
      path: ""
      type: "posts"
    values:
      layout: "post"
  - scope:
      path: ""
    values:
      layout: "default"
```

现在，您可以从所有页面和帖子的正面删除布局。注意 每当您更新时，您都需要重新启动 Jekyll for 更改生效。`_config.yml`

## 列出作者的帖子

让我们列出作者在其页面上发布的帖子。待办事项 这你需要将作者与帖子相匹配.你 使用它按作者过滤帖子。`short_name``author`

循环访问此筛选列表以输出 作者的帖子：`_layouts/author.html`

```
---
layout: default
---
<h1>{{ page.name }}</h1>
<h2>{{ page.position }}</h2>

{{ content }}

<h2>Posts</h2>
<ul>
  {% assign filtered_posts = site.posts | where: 'author', page.short_name %}
  {% for post in filtered_posts %}
    <li><a href="{{ post.url }}">{{ post.title }}</a></li>
  {% endfor %}
</ul>
```

## 链接到作者页面

这些帖子引用了作者，所以让我们将其链接到作者的页面。 您可以使用类似的过滤技术在 中执行此操作：`_layouts/post.html`

```
---
layout: default
---
<h1>{{ page.title }}</h1>

<p>
  {{ page.date | date_to_string }}
  {% assign author = site.authors | where: 'short_name', page.author | first %}
  {% if author %}
    - <a href="{{ author.url }}">{{ author.name }}</a>
  {% endif %}
</p>

{{ content }}
```

打开 [http://localhost:4000](http://localhost:4000/) 和 查看员工页面和帖子上的作者链接以检查所有内容 正确链接在一起。

在本教程的下一步也是最后一步中，我们将向网站添加润色和 为生产部署做好准备。

## 10. 部署

在最后一步中，我们将为生产做好网站准备。

## 宝石文件

最好为您的网站提供一个 [Gemfile](http://jekyllrb.com/docs/ruby-101/#gemfile)。 这可确保 Jekyll 和其他宝石的版本保持一致 不同的环境。

在根目录中创建一个。 该文件应称为“Gemfile”，*不应*具有任何扩展名。 您可以使用捆绑器创建 Gem 文件，然后添加 Gem：`Gemfile``jekyll`

```
bundle init
bundle add jekyll
```

您的文件应如下所示：

```
# frozen_string_literal: true
source "https://rubygems.org"

gem "jekyll"
```

捆绑器安装宝石并创建一个锁定当前 未来的宝石版本 .如果您想更新您的宝石 您可以运行的版本。`Gemfile.lock``bundle install``bundle update`

使用 时，您将运行类似带前缀的命令。所以完整的命令是：`Gemfile``jekyll serve``bundle exec`

```
bundle exec jekyll serve
```

这会将 Ruby 环境限制为仅使用在 .`Gemfile`

## 插件

Jekyll 插件允许您创建特定于您的自定义生成内容 网站。有许多[可用的插件](http://jekyllrb.com/docs/plugins/)，或者您甚至可以 写你自己的。

有三个官方插件几乎在任何 Jekyll 网站上都很有用：

- [杰基尔站点地图](https://github.com/jekyll/jekyll-sitemap) - 创建站点地图 文件以帮助搜索引擎索引内容
- [jekyll-feed](https://github.com/jekyll/jekyll-feed) - 创建 RSS 源 您的帖子
- [jekyll-seo-tag](https://github.com/jekyll/jekyll-seo-tag) - 添加元标记以帮助 与搜索引擎优化

要首先使用这些，您需要将它们添加到您的 .如果你把它们放 在一个组中，他们将自动被要求进入 Jekyll：`Gemfile``jekyll_plugins`

```
source 'https://rubygems.org'

gem 'jekyll'

group :jekyll_plugins do
  gem 'jekyll-sitemap'
  gem 'jekyll-feed'
  gem 'jekyll-seo-tag'
end
```

Then add these lines to your :`_config.yml`

```
plugins:
  - jekyll-feed
  - jekyll-sitemap
  - jekyll-seo-tag
```

Now install them by running a .`bundle update`

`jekyll-sitemap`不需要任何设置，它将在构建时创建您的站点地图。

对于，您需要将标签添加到：`jekyll-feed``jekyll-seo-tag``_layouts/default.html`

```
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{{ page.title }}</title>
    <link rel="stylesheet" href="/assets/css/styles.css">
    {% feed_meta %}
    {% seo %}
  </head>
  <body>
    {% include navigation.html %}
    {{ content }}
  </body>
</html>
```

重新启动 Jekyll 服务器并检查这些标记是否已添加到 .`<head>`

## 环境

有时您可能希望在生产中输出某些内容，但不是 在开发中。分析脚本是最常见的示例。

为此，您可以使用[环境](http://jekyllrb.com/docs/configuration/environments/)。你 可以在以下情况下使用环境变量设置环境 运行命令。例如：`JEKYLL_ENV`

```
JEKYLL_ENV=production bundle exec jekyll build
```

默认情况下是开发。可供您使用 在液体中使用.所以只输出分析脚本 在生产环境中，您将执行以下操作：`JEKYLL_ENV``JEKYLL_ENV``jekyll.environment`

```
{% if jekyll.environment == "production" %}
  <script src="my-analytics-script.js"></script>
{% endif %}
```

## 部署

最后一步是将站点放到生产服务器上。最基本的方法 为此，需要运行生产版本：

```
JEKYLL_ENV=production bundle exec jekyll build
```

然后将的内容复制到您的服务器。`_site`

##### 在站点生成时清理目标文件夹

默认情况下，在以下情况下，会自动清理 的内容 网站建成。不是由站点构建创建的文件或文件夹 进程将被删除。`_site`

某些文件可以通过在配置指令中指定来保留。其他文件可以通过将它们保存在您的 资产目录。`keep_files`

更好的方法是使用 [CI](http://jekyllrb.com/docs/deployment/automated/) 或[第三方](http://jekyllrb.com/docs/deployment/third-party/)自动执行此过程。

## 

这使我们结束了本分步教程和 你的杰基尔之旅！

- 快来社区[论坛](https://talk.jekyllrb.com/)打个招呼
- 通过[贡献](http://jekyllrb.com/docs/contributing/)帮助我们使 Jekyll 变得更好
- 继续建立杰基尔网站！



# 命令行用法

Jekyll gem 在您的终端中为您提供可执行文件。`jekyll`

该程序有几个命令，但结构始终是：`jekyll`

```
jekyll command [argument] [option] [argument_to_option]

Examples:
    jekyll new site/ --blank
    jekyll serve --config _alternative_config.yml
```

通常，在本地开发时以及需要生成用于生产的网站时，将使用。`jekyll serve``jekyll build`

有关选项及其参数的完整列表，请参阅[生成命令选项](http://jekyllrb.com/docs/configuration/options/#build-command-options)。

以下是一些最常见的命令：

- `jekyll new PATH`- 在指定路径创建一个新的 Jekyll 网站，其中包含默认的基于 gem 的主题。将根据需要创建目录。
- `jekyll new PATH --blank`- 在指定路径创建新的空白 Jekyll 站点基架。
- `jekyll build`或 - 执行一次性构建站点（默认情况下）。`jekyll b``./_site`
- `jekyll serve`或 - 在源文件更改时随时构建站点并在本地提供。`jekyll s`
- `jekyll clean`- 删除所有生成的文件：目标文件夹，元数据文件，Sass和Jekyll缓存。
- `jekyll help`- 显示帮助，可选地用于给定的子命令，例如 .`jekyll help build`
- `jekyll new-theme`- 创建一个新的杰基尔主题脚手架。
- `jekyll doctor`- 输出任何弃用或配置问题。

要更改 Jekyll 的默认构建行为，请查看[配置选项](http://jekyllrb.com/docs/configuration/)。



# 配置

Jekyll 为您提供了很大的灵活性来自定义它构建网站的方式。这些 可以在 或 放置的文件中指定选项 在站点的根目录中，或者可以指定为终端中可执行文件的标志。`_config.yml``_config.toml``jekyll`

- [配置选项](http://jekyllrb.com/docs/configuration/options/)
- [默认配置](http://jekyllrb.com/docs/configuration/default/)
- [前言默认值](http://jekyllrb.com/docs/configuration/front-matter-defaults/)
- [环境](http://jekyllrb.com/docs/configuration/environments/)
- [降价选项](http://jekyllrb.com/docs/configuration/markdown/)
- [液体期权](http://jekyllrb.com/docs/configuration/liquid/)
- [Sass/SCSS 选项](http://jekyllrb.com/docs/configuration/sass/)
- [韦布里克选项](http://jekyllrb.com/docs/configuration/webrick/)
- [增量再生](http://jekyllrb.com/docs/configuration/incremental-regeneration/)



# 渲染过程

对于任何 Jekyll 站点，*构建会话*由以下顺序的离散阶段组成*——设置插件， 读取源文件、运行生成器、渲染模板*，最后*将文件写入磁盘*。

虽然上述阶段是不言自明的，但需要剖析的一个阶段是*渲染阶段*。

渲染阶段可进一步分为三个可选阶段。渲染的每个文件都会经过一个或多个 这些阶段由文件的内容字符串、前言和扩展名决定。阶段类似于装配 行，阶段的*输出*是后续阶段的*输入*：

- **解释**文件中的液体表达式 此阶段计算当前文件中
  的液体表达式。默认情况下，解释是*肤浅*的——因为 不会进一步解释结果输出中的任何 Liquid 表达式。此外，文件中的任何液体表达式 前物原封不动。

- **释放**转换器
  此阶段调用映射到当前文件扩展名的转换器并转换输入字符串。这是什么时候 Markdown 被转换为 HTML，Sass / Scss 转换为 CSS，或者 CoffeeScript 转换为 JavaScript，等等。从这个阶段开始 由文件的扩展名决定，文件中的 Markdown 或 Sass 将保持不变。`.html`

- **填充布局**
  在此阶段，*源文件*被视为已呈现，不会重新访问。但是，根据文件的 扩展，因此根据前言，确定是否从 前面的阶段和放置是否进入布局。虽然 Sass 文件或 CoffeeScript 文件的输出*永远不会*放入布局中，但常规文本输出可以根据是否通过正面分配布局进行任一方式 事。

  放置在布局中的工作方式类似于俄罗斯娃娃将较小的娃娃包裹在自身内部或牡蛎如何 生成珍珠 — 前一阶段转换后的输出形成核心，布局依次*分别渲染*到核心上。



































