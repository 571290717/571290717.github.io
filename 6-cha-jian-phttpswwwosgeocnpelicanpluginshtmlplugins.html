<!doctype html>
<html lang="chinese (simplified)">
<head>
  <meta charset="utf-8">
  <!-- Site Meta Data -->
  <title>6、插件[¶](https://www.osgeo.cn/pelican/plugins.html#plugins)</title>
  <meta name="description" content="">
  <meta name="author" content="the_toast">

  <!-- Style Meta Data -->
  <link rel="stylesheet" href="/theme/css/notebook.css" type="text/css" />
  <link rel="shortcut icon" href="/20230502-myphoto.jpg">

  <!-- Feed Meta Data -->
  <link href="/" type="application/atom+xml" rel="alternate" title="the_toast ATOM Feed" />

  <!-- Twitter Feed -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="">
  <meta name="twitter:image" content="/20230502-myphoto.jpg">

<meta name="twitter:creator" content="">
<meta name="twitter:url" content="/6-cha-jian-phttpswwwosgeocnpelicanpluginshtmlplugins.html">
<meta name="twitter:title" content="the_toast ~ 6、插件[¶](https://www.osgeo.cn/pelican/plugins.html#plugins)">
<meta name="twitter:description" content="<p>从3.0版开始，Pelican支持插件。插件是一种向Pelican添加特性而不必直接修改Pelican核心的方法。</p>
<h2>如何使用插件<a href="https://www.osgeo.cn/pelican/plugins.html#how-to-use-plugins">¶</a></h2>
<p>从4.5版开始，Pelican迁移到了一个新的插件结构中，利用命名空间包，可以很容易地通过 <a href="https://pip.pypa.io/">Pip</a>. 支持此结构的插件将安装在命 …</p>">

<!-- Facebook Meta Data -->
<meta property="og:title" content="the_toast ~ 6、插件[¶](https://www.osgeo.cn/pelican/plugins.html#plugins)" />
<meta property="og:description" content="<p>从3.0版开始，Pelican支持插件。插件是一种向Pelican添加特性而不必直接修改Pelican核心的方法。</p>
<h2>如何使用插件<a href="https://www.osgeo.cn/pelican/plugins.html#how-to-use-plugins">¶</a></h2>
<p>从4.5版开始，Pelican迁移到了一个新的插件结构中，利用命名空间包，可以很容易地通过 <a href="https://pip.pypa.io/">Pip</a>. 支持此结构的插件将安装在命 …</p>" />
<meta property="og:image" content="20230502-myphoto.jpg" />
</head>

<body>
  <!-- Sidebar -->
  <aside>
    <p><a href=""><img id="avatar" src="/theme/images/20230502-myphoto.jpg"></a></p>
    <h1>the_toast</h1>
    <p></p>
    <hr>
    <h2>Social</h2>
    <ul class="social">
      <li style="list-style-image : url(/theme/images/icons/github.png);"><a href="#">GitHub</a></li>
      <li style="list-style-image : url(/theme/images/icons/facebook.png);"><a href="#">facebook</a></li>
      <li style="list-style-image : url(/theme/images/icons/github2.png);"><a href="#">GitHub2</a></li>
      <li style="list-style-image : url(/theme/images/icons/phone.png);"><a href="13304036141">phone</a></li>
      <li style="list-style-image : url(/theme/images/icons/rss.png);"><a href="/" rel="alternate"><i class="icon-bookmark icon-large"></i>Atom feed</a></li>
    </ul>
    <h2>Categories</h2>
    <ul class="navbar">
      <li class="active"><a href="/category/misc.html">misc</a></li>
      <li><a href="/category/pelicanjiao-cheng.html">pelican教程</a></li>
      <li><a href="/category/review.html">Review</a></li>
      <li><a href="/category/shou-ye.html">首页</a></li>
    </ul> 
  </aside>


  <!--    外部容器-->
<div class="top-bar-wrapper">
  <!--     内部容器-->
        <div class="top-bar clearfix">
  <!--          设置父元素-->
          <div class="top-nav">
  <!--            鼠标移入出现下拉框元素-->
                <h2>目录</h2>
                <ul class="nav">
                  <li><a href="/category/shou-ye.html">首页</a></li>
                  <li><a href="/category/review.html">Review</a></li>
                  <li><a href="/category/pelicanjiao-cheng.html">pelican教程</a></li>
                  <li class="active"><a href="/category/misc.html">misc</a></li>
                </ul>

              </div>
          </div>
        </div>
      </div>


  <!-- Content -->
  <article>
<section id="content">
    <article>
        <header class="post_list">
            <h2 class="post_title"><a href="/6-cha-jian-phttpswwwosgeocnpelicanpluginshtmlplugins.html" rel="bookmark" title="Permalink to 6、插件[¶](https://www.osgeo.cn/pelican/plugins.html#plugins)">6、插件[¶](https://www.osgeo.cn/pelican/plugins.html#plugins)</a></h2>
            <span>Par </span>
            <a href="/author/the_toast.html">@the_toast</a>
            <span> dans </span>
            <span class="post_category"><a href="/category/misc.html" rel="bookmark" title="Permalink to misc">[ misc ]</a></span>
            <span> le </span>
            <span class="post_date">2023-10-31 星期二 00:00</span>
            <div><span>Tags : </span>
            </div>

            <div class="entry-social">
                <span class="twitter"><a target="_blank" rel="nofollow" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=700');return false;" title="Twitter" href="https://twitter.com/share?url=/6-cha-jian-phttpswwwosgeocnpelicanpluginshtmlplugins.html&text=6、插件[¶](https://www.osgeo.cn/pelican/plugins.html#plugins)&via=">Twitter</a></span>

                <span class="gplus"><a target="_blank" title="Google +" href="https://plus.google.com/share?url=/6-cha-jian-phttpswwwosgeocnpelicanpluginshtmlplugins.html&hl=fr" rel="nofollow" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;">Google+</a></span>

                <span class="facebook"><a target="_blank" title="Facebook" rel="nofollow" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=700');return false;" href="https://www.facebook.com/sharer.php?u=/6-cha-jian-phttpswwwosgeocnpelicanpluginshtmlplugins.html&t=6、插件[¶](https://www.osgeo.cn/pelican/plugins.html#plugins)">Facebook</a></span>

                <a  target="_blank" title="Linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=</6-cha-jian-phttpswwwosgeocnpelicanpluginshtmlplugins.html&title=6、插件[¶](https://www.osgeo.cn/pelican/plugins.html#plugins)" rel="nofollow" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;">Linkedin</a>

                <span class="mail"><a href="mailto:?subject=6、插件[¶](https://www.osgeo.cn/pelican/plugins.html#plugins)&amp;body=Viens découvrir un article à propos de [6、插件[¶](https://www.osgeo.cn/pelican/plugins.html#plugins)] sur le site de the_toast. /6-cha-jian-phttpswwwosgeocnpelicanpluginshtmlplugins.html" title="Share by Email" target="_blank">Mail</a></span>
            </div>
        </header>
        <div class="entry-content">
            <p>从3.0版开始，Pelican支持插件。插件是一种向Pelican添加特性而不必直接修改Pelican核心的方法。</p>
<h2>如何使用插件<a href="https://www.osgeo.cn/pelican/plugins.html#how-to-use-plugins">¶</a></h2>
<p>从4.5版开始，Pelican迁移到了一个新的插件结构中，利用命名空间包，可以很容易地通过 <a href="https://pip.pypa.io/">Pip</a>. 支持此结构的插件将安装在命名空间包下 <code>pelican.plugins</code> 它可以被鹈鹕自动发现。要查看在您的环境中处于活动状态的Pip安装的命名空间插件的列表，请运行：</p>
<div class="highlight"><pre><span></span><code>pelican-plugins
</code></pre></div>

<p>如果你离开 <code>PLUGINS</code> 设置为默认值 (<code>None</code> )，Pelican将自动发现命名空间插件并注册它们。另一方面，如果指定 <code>PLUGINS</code> 设置为插件列表，此自动发现将被禁用。此时，只注册您指定的插件，并且您必须显式列出任何命名空间插件。</p>
<p>如果您正在使用 <code>PLUGINS</code> 设置时，可以用两种方式指定插件。第一个方法将插件指定为字符串列表。命名空间插件可以通过其全名指定 (<code>pelican.plugins.myplugin</code> )或者他们的简称 (<code>myplugin</code> ）：</p>
<div class="highlight"><pre><span></span><code><span class="nx">PLUGINS</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="err">&#39;</span><span class="kn">package</span><span class="p">.</span><span class="nx">myplugin</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">           </span><span class="err">&#39;</span><span class="nx">namespace_plugin1</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">           </span><span class="err">&#39;</span><span class="nx">pelican</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">namespace_plugin2</span><span class="err">&#39;</span><span class="p">]</span>
</code></pre></div>

<p>或者，您可以将它们导入设置文件并传递模块：</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">package</span> <span class="kn">import</span> <span class="n">myplugin</span>
<span class="kn">from</span> <span class="nn">pelican.plugins</span> <span class="kn">import</span> <span class="n">namespace_plugin1</span><span class="p">,</span> <span class="n">namespace_plugin2</span>
<span class="n">PLUGINS</span> <span class="o">=</span> <span class="p">[</span><span class="n">myplugin</span><span class="p">,</span> <span class="n">namespace_plugin1</span><span class="p">,</span> <span class="n">namespace_plugin2</span><span class="p">]</span>
</code></pre></div>

<p>注解</p>
<p>当尝试使用不同的插件（尤其是那些处理元数据和内容的插件）时，缓存可能会产生干扰，并且更改可能不可见。在这种情况下，使用禁用缓存 <code>LOAD_CONTENT_CACHE = False</code> 或者使用 <code>--ignore-cache</code> 命令行开关。</p>
<p>如果插件不在可导入路径中，则可以通过 <code>PLUGIN_PATHS</code> 设置。如以下示例所示，中的路径 <code>PLUGIN_PATHS</code> 列表可以是绝对的，也可以是相对于设置文件的：</p>
<div class="highlight"><pre><span></span><code>PLUGIN_PATHS = [&quot;plugins&quot;, &quot;/srv/pelican/plugins&quot;]
PLUGINS = [&quot;assets&quot;, &quot;liquid_tags&quot;, &quot;sitemap&quot;]
</code></pre></div>

<h2>在哪里可以找到插件<a href="https://www.osgeo.cn/pelican/plugins.html#where-to-find-plugins">¶</a></h2>
<p>命名空间插件可以在 <a href="https://github.com/pelican-plugins">pelican-plugins organization</a> 作为单独的存储库。旧插件位于 <a href="https://github.com/getpelican/pelican-plugins">pelican-plugins repository</a> 并将逐步淘汰，取而代之的是命名空间版本。</p>
<p>请注意，虽然我们尽力检查和维护这些插件，但它们是由Pelican社区提交的，因此可能具有不同级别的支持和互操作性。</p>
<h2>如何创建插件<a href="https://www.osgeo.cn/pelican/plugins.html#how-to-create-plugins">¶</a></h2>
<p>插件基于信号的概念。鹈鹕发送信号，插件订阅这些信号。可用信号列表将在后续章节中记录。</p>
<p>插件要遵循的唯一规则是定义 <code>register</code> 可调用的，其中你可以将信号映射到你的插件逻辑。举个简单的例子：</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">pelican</span> <span class="kn">import</span> <span class="n">signals</span>

<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">sender</span><span class="p">):</span>
    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> initialized !!&quot;</span><span class="p">,</span> <span class="n">sender</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">initialized</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
</code></pre></div>

<p>注解</p>
<p>信号接收器被弱引用，因此不能在 <code>register</code> 否则它们将在信号发出之前被垃圾回收。</p>
<p>如果多个插件连接到同一信号，则无法保证或控制插件的执行顺序。这是继承自 <a href="https://pythonhosted.org/blinker/">Blinker</a>, 鹈鹕用来实现信号的依赖关系。</p>
<h3>命名空间插件结构<a href="https://www.osgeo.cn/pelican/plugins.html#namespace-plugin-structure">¶</a></h3>
<p>命名空间插件必须遵循特定的结构才能正常工作。它们需要是可安装的（即包含 <code>setup.py</code> 或等效文件）并具有如下文件夹结构：</p>
<div class="highlight"><pre><span></span><code>myplugin
├── pelican
│   └── plugins
│       └── myplugin
│           ├── __init__.py
│           └── ...
├── ...
└── setup.py
</code></pre></div>

<p>至关重要的是 <code>pelican</code> 或 <code>pelican/plugins</code> 文件夹 <strong>not</strong> 包含一个 <code>__init__.py</code> 文件。事实上，除了上述结构中列出的文件夹之外，最好将这些文件夹清空，并将与插件相关的文件单独包含在 <code>pelican/plugins/myplugin</code> 文件夹以避免任何问题。</p>
<p>为了方便地设置适当的结构，a <a href="https://github.com/getpelican/cookiecutter-pelican-plugin">cookiecutter template for plugins</a> 提供。有关如何使用它的说明，请参阅该项目的自述文件。</p>
<h2>信号一览表<a href="https://www.osgeo.cn/pelican/plugins.html#list-of-signals">¶</a></h2>
<p>以下是当前实施的信号列表：</p>
<table>
<thead>
<tr>
<th>信号</th>
<th>争论</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>已初始化</td>
<td>Pelican物体</td>
<td></td>
</tr>
<tr>
<td>定稿</td>
<td>Pelican物体</td>
<td>在执行所有生成器之后，在pelican退出之前调用，这对于自定义后处理操作非常有用，例如：-缩小js/css资产。-使用更新的网站地图通知/ping搜索引擎。</td>
</tr>
<tr>
<td>generator_init</td>
<td>生成器</td>
<td>在中调用 Generator.<strong>init</strong></td>
</tr>
<tr>
<td>all_generators_finalized</td>
<td>生成器</td>
<td>在执行所有生成器之后和写入输出之前调用</td>
</tr>
<tr>
<td>readers_init</td>
<td>读者</td>
<td>在中调用 Readers.<strong>init</strong></td>
</tr>
<tr>
<td>article_generator_context</td>
<td>项目生成器，元数据</td>
<td></td>
</tr>
<tr>
<td>article_generator_preread</td>
<td>article_generator</td>
<td>在读入文章之前调用ArticlesGenerator.generate_上下文；如果代码需要在解析每个项目之前执行某些操作，则使用</td>
</tr>
<tr>
<td>article_generator_init</td>
<td>article_generator</td>
<td>在中调用 ArticlesGenerator.<strong>init</strong></td>
</tr>
<tr>
<td>article_generator_pretaxonomy</td>
<td>article_generator</td>
<td>在创建类别和标记列表之前调用，当修改要生成的项目列表以便删除的项目不会在类别或标记中泄漏时非常有用</td>
</tr>
<tr>
<td>article_generator_finalized</td>
<td>article_generator</td>
<td>在结束时调用ArticlesGenerator.generate_上下文</td>
</tr>
<tr>
<td>article_generator_write_article</td>
<td>文章生成器，内容</td>
<td>在编写每个文章之前调用，文章作为内容传递</td>
</tr>
<tr>
<td>article_writer_finalized</td>
<td>文章生成器，作者</td>
<td>在编写完所有文章和相关页面之后，但在关闭项目生成器之前调用。</td>
</tr>
<tr>
<td>get_generators</td>
<td>Pelican物体</td>
<td>在中调用Pelican.get_generator_类，可以返回一个生成器，或元组或列表中的多个生成器。</td>
</tr>
<tr>
<td>get_writer</td>
<td>Pelican物体</td>
<td>在中调用Pelican。get嫒作家，可以返回自定义写入程序。</td>
</tr>
<tr>
<td>page_generator_context</td>
<td>页面生成器，元数据</td>
<td></td>
</tr>
<tr>
<td>page_generator_preread</td>
<td>page_generator</td>
<td>在读入页之前调用PageGenerator.generate_上下文；如果代码需要在解析每个页面之前执行某些操作，则使用。</td>
</tr>
<tr>
<td>page_generator_init</td>
<td>page_generator</td>
<td>在中调用 PagesGenerator.<strong>init</strong></td>
</tr>
<tr>
<td>page_generator_finalized</td>
<td>page_generator</td>
<td>在结束时调用PagesGenerator.generate_上下文</td>
</tr>
<tr>
<td>page_generator_write_page</td>
<td>页面生成器，内容</td>
<td>在编写每个页面之前调用，页面作为内容传递</td>
</tr>
<tr>
<td>page_writer_finalized</td>
<td>page_生成器，作者</td>
<td>在写入所有页之后，但在页生成器关闭之前调用。</td>
</tr>
<tr>
<td>static_generator_context</td>
<td>静态_生成器，元数据</td>
<td></td>
</tr>
<tr>
<td>static_generator_preread</td>
<td>static_generator</td>
<td>在读入静态文件之前调用StaticGenerator.generate_上下文；如果代码需要在将每个静态文件添加到staticfiles列表之前执行某些操作，则使用。</td>
</tr>
<tr>
<td>static_generator_init</td>
<td>static_generator</td>
<td>在中调用 StaticGenerator.<strong>init</strong></td>
</tr>
<tr>
<td>static_generator_finalized</td>
<td>static_generator</td>
<td>在结束时调用StaticGenerator.generate_上下文</td>
</tr>
<tr>
<td>content_object_init</td>
<td>content_object</td>
<td>在结束时调用 Content.<strong>init</strong></td>
</tr>
<tr>
<td>content_written</td>
<td>路径，上下文</td>
<td>每次写入内容文件时调用。</td>
</tr>
<tr>
<td>feed_generated</td>
<td>上下文，提要</td>
<td>每次生成提要时调用。可用于在写入提要对象之前对其进行修改。</td>
</tr>
<tr>
<td>feed_written</td>
<td>路径、上下文、提要</td>
<td>每次写入提要文件时调用。</td>
</tr>
</tbody>
</table>
<p>警告</p>
<p>避免 <code>content_object_init</code> 如果你想读就发信号 <code>summary</code> 或 <code>content</code> 内容对象的属性。可能导致无法解决的链接 <a href="https://www.osgeo.cn/pelican/content.html#ref-linking-to-internal-content">链接到内部内容</a> （见 <a href="https://github.com/getpelican/pelican-plugins/issues/314">pelican-plugins bug #314</a> ）使用 <code>_summary</code> 和 <code>_content</code> 属性，或者在以后运行插件（例如。 <code>all_generators_finalized</code> ）</p>
<p>注解</p>
<p>Pelican3.2之后，信号名称被标准化。旧插件可能需要更新才能使用新名称：</p>
<table>
<thead>
<tr>
<th>旧名</th>
<th>新名称</th>
</tr>
</thead>
<tbody>
<tr>
<td>article_generate_context</td>
<td>article_generator_context</td>
</tr>
<tr>
<td>article_generate_finalized</td>
<td>article_generator_finalized</td>
</tr>
<tr>
<td>article_generate_preread</td>
<td>article_generator_preread</td>
</tr>
<tr>
<td>pages_generate_context</td>
<td>page_generator_context</td>
</tr>
<tr>
<td>pages_generate_preread</td>
<td>page_generator_preread</td>
</tr>
<tr>
<td>pages_generator_finalized</td>
<td>page_generator_finalized</td>
</tr>
<tr>
<td>pages_generator_init</td>
<td>page_generator_init</td>
</tr>
<tr>
<td>static_generate_context</td>
<td>static_generator_context</td>
</tr>
<tr>
<td>static_generate_preread</td>
<td>static_generator_preread</td>
</tr>
</tbody>
</table>
<h2>食谱<a href="https://www.osgeo.cn/pelican/plugins.html#recipes">¶</a></h2>
<p>我们最终意识到创建插件的一些方法最好在文档中的某个地方共享，所以它们就在这里！</p>
<h3>如何创建新的阅读器<a href="https://www.osgeo.cn/pelican/plugins.html#how-to-create-a-new-reader">¶</a></h3>
<p>您可能希望添加对自己的输入格式的支持。虽然在Pelican core中添加这个特性是有意义的，但是我们明智地选择了避免这种情况，而是通过插件定义不同的阅读器。</p>
<p>这种选择背后的基本原理主要是插件确实很容易编写，并且当插件不活动时不会减慢Pelican本身的速度。</p>
<p>别再说了-这里有个例子：</p>
<div class="highlight"><pre><span></span><code><span class="s s-Atom">from</span> <span class="s s-Atom">pelican</span> <span class="s s-Atom">import</span> <span class="s s-Atom">signals</span>
<span class="s s-Atom">from</span> <span class="s s-Atom">pelican</span><span class="p">.</span><span class="s s-Atom">readers</span> <span class="s s-Atom">import</span> <span class="nv">BaseReader</span>

<span class="s s-Atom">#</span> <span class="nv">Create</span> <span class="s s-Atom">a</span> <span class="s s-Atom">new</span> <span class="s s-Atom">reader</span> <span class="s s-Atom">class</span><span class="p">,</span> <span class="s s-Atom">inheriting</span> <span class="s s-Atom">from</span> <span class="s s-Atom">the</span> <span class="s s-Atom">pelican</span><span class="p">.</span><span class="s s-Atom">reader</span><span class="p">.</span><span class="nv">BaseReader</span>
<span class="s s-Atom">class</span> <span class="nv">NewReader</span><span class="p">(</span><span class="nv">BaseReader</span><span class="p">)</span><span class="o">:</span>
    <span class="s s-Atom">enabled</span> <span class="o">=</span> <span class="nv">True</span>  <span class="s s-Atom">#</span> <span class="nv">Yeah</span><span class="p">,</span> <span class="s s-Atom">you</span> <span class="s s-Atom">probably</span> <span class="s s-Atom">want</span> <span class="nf">that</span> <span class="o">:-</span><span class="p">)</span>

    <span class="s s-Atom">#</span> <span class="nv">The</span> <span class="s s-Atom">list</span> <span class="s s-Atom">of</span> <span class="s s-Atom">file</span> <span class="s s-Atom">extensions</span> <span class="s s-Atom">you</span> <span class="s s-Atom">want</span> <span class="s s-Atom">this</span> <span class="s s-Atom">reader</span> <span class="s s-Atom">to</span> <span class="s s-Atom">match</span> <span class="s s-Atom">with</span><span class="p">.</span>
    <span class="s s-Atom">#</span> <span class="nv">If</span> <span class="s s-Atom">multiple</span> <span class="s s-Atom">readers</span> <span class="s s-Atom">were</span> <span class="s s-Atom">to</span> <span class="s s-Atom">use</span> <span class="s s-Atom">the</span> <span class="s s-Atom">same</span> <span class="s s-Atom">extension</span><span class="p">,</span> <span class="s s-Atom">the</span> <span class="s s-Atom">latest</span> <span class="s s-Atom">will</span>
    <span class="s s-Atom">#</span> <span class="nf">win</span> <span class="p">(</span><span class="s s-Atom">so</span> <span class="s s-Atom">the</span> <span class="s s-Atom">one</span> <span class="s s-Atom">you&#39;re defining here, most probably).</span>
<span class="s s-Atom">    file_extensions = [&#39;yeah&#39;]</span>

<span class="s s-Atom">    # You need to have a read method, which takes a filename and returns</span>
<span class="s s-Atom">    # some content and the associated metadata.</span>
<span class="s s-Atom">    def read(self, filename):</span>
<span class="s s-Atom">        metadata = {&#39;title&#39;: &#39;</span><span class="nv">Oh</span> <span class="s s-Atom">yeah&#39;,</span>
<span class="s s-Atom">                    &#39;category&#39;: &#39;</span><span class="nv">Foo</span><span class="s s-Atom">&#39;,</span>
<span class="s s-Atom">                    &#39;date&#39;: &#39;</span><span class="mi">2012</span><span class="o">-</span><span class="mi">12</span><span class="o">-</span><span class="mi">01</span><span class="s s-Atom">&#39;}</span>

<span class="s s-Atom">        parsed = {}</span>
<span class="s s-Atom">        for key, value in metadata.items():</span>
<span class="s s-Atom">            parsed[key] = self.process_metadata(key, value)</span>

<span class="s s-Atom">        return &quot;Some content&quot;, parsed</span>

<span class="s s-Atom">def add_reader(readers):</span>
<span class="s s-Atom">    readers.reader_classes[&#39;yeah</span><span class="err">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">NewReader</span>

<span class="s s-Atom">#</span> <span class="nv">This</span> <span class="o">is</span> <span class="s s-Atom">how</span> <span class="s s-Atom">pelican</span> <span class="s s-Atom">works</span><span class="p">.</span>
<span class="s s-Atom">def</span> <span class="nf">register</span><span class="p">()</span><span class="o">:</span>
    <span class="s s-Atom">signals</span><span class="p">.</span><span class="s s-Atom">readers_init</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="s s-Atom">add_reader</span><span class="p">)</span>
</code></pre></div>

<h3>添加新生成器<a href="https://www.osgeo.cn/pelican/plugins.html#adding-a-new-generator">¶</a></h3>
<p>添加一个新的生成器也非常容易。你可能想看看 <a href="https://www.osgeo.cn/pelican/internals.html">Pelican内部构件</a> 有关如何创建自己的生成器的详细信息。</p>
<div class="highlight"><pre><span></span><code><span class="n">def</span><span class="w"> </span><span class="n">get_generators</span><span class="p">(</span><span class="n">pelican_object</span><span class="p">):</span>
<span class="w">    </span><span class="c1"># define a new generator here if you need to</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">MyGenerator</span>

<span class="n">def</span><span class="w"> </span><span class="n">register</span><span class="p">():</span>
<span class="w">    </span><span class="n">signals</span><span class="o">.</span><span class="n">get_generators</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">get_generators</span><span class="p">)</span>
</code></pre></div>

<h3>添加新编写器<a href="https://www.osgeo.cn/pelican/plugins.html#adding-a-new-writer">¶</a></h3>
<p>添加编写器将允许您将其他文件格式输出到磁盘，或更改现有格式写入磁盘的方式。请注意，一次只有一个编写器处于活动状态，因此请确保将内置编写器子类化为子类，或者完全重新实现它。</p>
<p>以下是如何设置您自己的编写器的基本示例：</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pelican.writers</span> <span class="kn">import</span> <span class="n">Writer</span>
<span class="kn">from</span> <span class="nn">pelican</span> <span class="kn">import</span> <span class="n">signals</span>

<span class="k">class</span> <span class="nc">MyWriter</span><span class="p">(</span><span class="n">Writer</span><span class="p">):</span>
    <span class="c1"># define new writer functionality</span>
    <span class="k">pass</span>


<span class="k">def</span> <span class="nf">add_writer</span><span class="p">(</span><span class="n">pelican_object</span><span class="p">):</span>
    <span class="c1"># use pelican_instance to setup stuff if needed</span>
    <span class="k">return</span> <span class="n">MyWriter</span>


<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">get_writer</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">add_writer</span><span class="p">)</span>
</code></pre></div>

<p><a href="https://www.osgeo.cn/pelican/settings.html"> Previous</a><a href="https://www.osgeo.cn/pelican/themes.html">Next </a></p>
        </div>
    </article>
</section>
  </article>

  <!-- Footer -->
  <footer>
    <address id="about" class="vcard body">
      Blog powered by <a href="http://getpelican.com/">Pelican</a>, 
      which takes great advantage of <a href="http://python.org">Python</a>.
      Theme <a href="https://github.com/quack1/notebook/">Notebook</a> by <a href="https://twitter.com/_Quack1">@Quack1</a>.
    </address>
  </footer>


</body>
</html>